package com.code4Book;

public class JavaVMStackSOF {
    private static int stackLength = 1;

    /**
     * 无穷的递归,无限压栈,栈最终被压爆
     */
    public void stackLeak() {
        stackLength++;
        stackLeak();
    }

    /**
     * 递归的创建大量的局部对象,用局部变量压爆栈
     */
    public static void test() {
        long UU1, UU2, UU3, UU4, UU5, UU6, UU7, UU8, UU9, UU10, UU11, UU12, UU13, UU14, UU15, UU16, UU17, UU18, UU19, UU20, UU21, UU22, UU23, UU24, UU25, UU26, UU27, UU28, UU29, UU30, UU31, UU32, UU33, UU34, UU35, UU36, UU37, UU38, UU39, UU40, UU41, UU42, UU43, UU44, UU45, UU46, UU47, UU48, UU49, UU50, UU51, UU52, UU53, UU54, UU55, UU56, UU57, UU58, UU59, UU60, UU61, UU62, UU63, UU64, UU65, UU66, UU67, UU68, UU69, UU70, UU71, UU72, UU73, UU74, UU75, UU76, UU77, UU78, UU79, UU80, UU81, UU82, UU83, UU84, UU85, UU86, UU87, UU88, UU89, UU90, UU91, UU92, UU93, UU94, UU95, UU96, UU97, UU98, UU99, UU100, UU101, UU102, UU103, UU104, UU105, UU106, UU107, UU108, UU109, UU110, UU111, UU112, UU113, UU114, UU115, UU116, UU117, UU118, UU119, UU120, UU121, UU122, UU123, UU124, UU125, UU126, UU127, UU128, UU129, UU130, UU131, UU132, UU133, UU134, UU135, UU136, UU137, UU138, UU139, UU140, UU141, UU142, UU143, UU144, UU145, UU146, UU147, UU148, UU149, UU150, UU151, UU152, UU153, UU154, UU155, UU156, UU157, UU158, UU159, UU160, UU161, UU162, UU163, UU164, UU165, UU166, UU167, UU168, UU169, UU170, UU171, UU172, UU173, UU174, UU175, UU176, UU177, UU178, UU179, UU180, UU181, UU182, UU183, UU184, UU185, UU186, UU187, UU188, UU189, UU190, UU191, UU192, UU193, UU194, UU195, UU196, UU197, UU198, UU199, UU200, UU201, UU202, UU203, UU204, UU205, UU206, UU207, UU208, UU209, UU210, UU211, UU212, UU213, UU214, UU215, UU216, UU217, UU218, UU219, UU220, UU221, UU222, UU223, UU224, UU225, UU226, UU227, UU228, UU229, UU230, UU231, UU232, UU233, UU234, UU235, UU236, UU237, UU238, UU239, UU240, UU241, UU242, UU243, UU244, UU245, UU246, UU247, UU248, UU249, UU250, UU251, UU252, UU253, UU254, UU255, UU256, UU257, UU258, UU259, UU260, UU261, UU262, UU263, UU264, UU265, UU266, UU267, UU268, UU269, UU270, UU271, UU272, UU273, UU274, UU275, UU276, UU277, UU278, UU279, UU280, UU281, UU282, UU283, UU284, UU285, UU286, UU287, UU288, UU289, UU290, UU291, UU292, UU293, UU294, UU295, UU296, UU297, UU298, UU299, UU300, UU301, UU302, UU303, UU304, UU305, UU306, UU307, UU308, UU309, UU310, UU311, UU312, UU313, UU314, UU315, UU316, UU317, UU318, UU319, UU320, UU321, UU322, UU323, UU324, UU325, UU326, UU327, UU328, UU329, UU330, UU331, UU332, UU333, UU334, UU335, UU336, UU337, UU338, UU339, UU340, UU341, UU342, UU343, UU344, UU345, UU346, UU347, UU348, UU349, UU350, UU351, UU352, UU353, UU354, UU355, UU356, UU357, UU358, UU359, UU360, UU361, UU362, UU363, UU364, UU365, UU366, UU367, UU368, UU369, UU370, UU371, UU372, UU373, UU374, UU375, UU376, UU377, UU378, UU379, UU380, UU381, UU382, UU383, UU384, UU385, UU386, UU387, UU388, UU389, UU390, UU391, UU392, UU393, UU394, UU395, UU396, UU397, UU398, UU399, UU400, UU401, UU402, UU403, UU404, UU405, UU406, UU407, UU408, UU409, UU410, UU411, UU412, UU413, UU414, UU415, UU416, UU417, UU418, UU419, UU420, UU421, UU422, UU423, UU424, UU425, UU426, UU427, UU428, UU429, UU430, UU431, UU432, UU433, UU434, UU435, UU436, UU437, UU438, UU439, UU440, UU441, UU442, UU443, UU444, UU445, UU446, UU447, UU448, UU449, UU450, UU451, UU452, UU453, UU454, UU455, UU456, UU457, UU458, UU459, UU460, UU461, UU462, UU463, UU464, UU465, UU466, UU467, UU468, UU469, UU470, UU471, UU472, UU473, UU474, UU475, UU476, UU477, UU478, UU479, UU480, UU481, UU482, UU483, UU484, UU485, UU486, UU487, UU488, UU489, UU490, UU491, UU492, UU493, UU494, UU495, UU496, UU497, UU498, UU499, UU500;
        stackLength++;
        test();
        UU1 = UU2 = UU3 = UU4 = UU5 = UU6 = UU7 = UU8 = UU9 = UU10 = UU11 = UU12 = UU13 = UU14 = UU15 = UU16 = UU17 = UU18 = UU19 = UU20 = UU21 = UU22 = UU23 = UU24 = UU25 = UU26 = UU27 = UU28 = UU29 = UU30 = UU31 = UU32 = UU33 = UU34 = UU35 = UU36 = UU37 = UU38 = UU39 = UU40 = UU41 = UU42 = UU43 = UU44 = UU45 = UU46 = UU47 = UU48 = UU49 = UU50 = UU51 = UU52 = UU53 = UU54 = UU55 = UU56 = UU57 = UU58 = UU59 = UU60 = UU61 = UU62 = UU63 = UU64 = UU65 = UU66 = UU67 = UU68 = UU69 = UU70 = UU71 = UU72 = UU73 = UU74 = UU75 = UU76 = UU77 = UU78 = UU79 = UU80 = UU81 = UU82 = UU83 = UU84 = UU85 = UU86 = UU87 = UU88 = UU89 = UU90 = UU91 = UU92 = UU93 = UU94 = UU95 = UU96 = UU97 = UU98 = UU99 = UU100 = UU101 = UU102 = UU103 = UU104 = UU105 = UU106 = UU107 = UU108 = UU109 = UU110 = UU111 = UU112 = UU113 = UU114 = UU115 = UU116 = UU117 = UU118 = UU119 = UU120 = UU121 = UU122 = UU123 = UU124 = UU125 = UU126 = UU127 = UU128 = UU129 = UU130 = UU131 = UU132 = UU133 = UU134 = UU135 = UU136 = UU137 = UU138 = UU139 = UU140 = UU141 = UU142 = UU143 = UU144 = UU145 = UU146 = UU147 = UU148 = UU149 = UU150 = UU151 = UU152 = UU153 = UU154 = UU155 = UU156 = UU157 = UU158 = UU159 = UU160 = UU161 = UU162 = UU163 = UU164 = UU165 = UU166 = UU167 = UU168 = UU169 = UU170 = UU171 = UU172 = UU173 = UU174 = UU175 = UU176 = UU177 = UU178 = UU179 = UU180 = UU181 = UU182 = UU183 = UU184 = UU185 = UU186 = UU187 = UU188 = UU189 = UU190 = UU191 = UU192 = UU193 = UU194 = UU195 = UU196 = UU197 = UU198 = UU199 = UU200 = UU201 = UU202 = UU203 = UU204 = UU205 = UU206 = UU207 = UU208 = UU209 = UU210 = UU211 = UU212 = UU213 = UU214 = UU215 = UU216 = UU217 = UU218 = UU219 = UU220 = UU221 = UU222 = UU223 = UU224 = UU225 = UU226 = UU227 = UU228 = UU229 = UU230 = UU231 = UU232 = UU233 = UU234 = UU235 = UU236 = UU237 = UU238 = UU239 = UU240 = UU241 = UU242 = UU243 = UU244 = UU245 = UU246 = UU247 = UU248 = UU249 = UU250 = UU251 = UU252 = UU253 = UU254 = UU255 = UU256 = UU257 = UU258 = UU259 = UU260 = UU261 = UU262 = UU263 = UU264 = UU265 = UU266 = UU267 = UU268 = UU269 = UU270 = UU271 = UU272 = UU273 = UU274 = UU275 = UU276 = UU277 = UU278 = UU279 = UU280 = UU281 = UU282 = UU283 = UU284 = UU285 = UU286 = UU287 = UU288 = UU289 = UU290 = UU291 = UU292 = UU293 = UU294 = UU295 = UU296 = UU297 = UU298 = UU299 = UU300 = UU301 = UU302 = UU303 = UU304 = UU305 = UU306 = UU307 = UU308 = UU309 = UU310 = UU311 = UU312 = UU313 = UU314 = UU315 = UU316 = UU317 = UU318 = UU319 = UU320 = UU321 = UU322 = UU323 = UU324 = UU325 = UU326 = UU327 = UU328 = UU329 = UU330 = UU331 = UU332 = UU333 = UU334 = UU335 = UU336 = UU337 = UU338 = UU339 = UU340 = UU341 = UU342 = UU343 = UU344 = UU345 = UU346 = UU347 = UU348 = UU349 = UU350 = UU351 = UU352 = UU353 = UU354 = UU355 = UU356 = UU357 = UU358 = UU359 = UU360 = UU361 = UU362 = UU363 = UU364 = UU365 = UU366 = UU367 = UU368 = UU369 = UU370 = UU371 = UU372 = UU373 = UU374 = UU375 = UU376 = UU377 = UU378 = UU379 = UU380 = UU381 = UU382 = UU383 = UU384 = UU385 = UU386 = UU387 = UU388 = UU389 = UU390 = UU391 = UU392 = UU393 = UU394 = UU395 = UU396 = UU397 = UU398 = UU399 = UU400 = UU401 = UU402 = UU403 = UU404 = UU405 = UU406 = UU407 = UU408 = UU409 = UU410 = UU411 = UU412 = UU413 = UU414 = UU415 = UU416 = UU417 = UU418 = UU419 = UU420 = UU421 = UU422 = UU423 = UU424 = UU425 = UU426 = UU427 = UU428 = UU429 = UU430 = UU431 = UU432 = UU433 = UU434 = UU435 = UU436 = UU437 = UU438 = UU439 = UU440 = UU441 = UU442 = UU443 = UU444 = UU445 = UU446 = UU447 = UU448 = UU449 = UU450 = UU451 = UU452 = UU453 = UU454 = UU455 = UU456 = UU457 = UU458 = UU459 = UU460 = UU461 = UU462 = UU463 = UU464 = UU465 = UU466 = UU467 = UU468 = UU469 = UU470 = UU471 = UU472 = UU473 = UU474 = UU475 = UU476 = UU477 = UU478 = UU479 = UU480 = UU481 = UU482 = UU483 = UU484 = UU485 = UU486 = UU487 = UU488 = UU489 = UU490 = UU491 = UU492 = UU493 = UU494 = UU495 = UU496 = UU497 = UU498 = UU499 = UU500 = 0;
    }

    public static void main(String[] args) {
        JavaVMStackSOF oom = new JavaVMStackSOF();
        try {
            //oom.stackLeak();
            test();
        } catch (Throwable throwable) {
            System.out.println("length:" + stackLength);
            throw throwable;
        }

    }
}
