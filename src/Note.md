 ### 堆(Heap)
1. 分区    
    1. 新生代 1  
        1. 伊甸园(Eden Space) 8  
            数据量超阈值开启YGC  
            YGC:在Eden区发生的GC,清除绝大部分内容,轻量GC  
            存活下来的数据进入幸存者0区
        2. 幸存者0区(Survivor 0 Space) 1  
            每次GC之后可能会发生 S0和S1位置交换,谁的空间更大谁变为S1
        3. 幸存者1区(Survivor 1 Space) 1
    2. 老年代 2  
        1. 数据量超阈值开启FGC  
        2. FGC(Full GC):FGC之后数据仍然溢出,会报OOM Exception.  
    3. 永久代(1.7-)\元空间(1.8+)  
        其实永久代｜元空间就是方法区的具体实现，里边存放类信息+普通常量+静态常量+编译器编译后的代码等，一般不会进行垃圾回收。
2. GC
    1. YGC(复制->清空->互换)  
        1. 第一次GC，Eden区存活对象copy到S0区，清空Eden区所有对象，存活对象年龄+1  
        2. 第二次及以后GC：对Eden区和S0区所有对象进行垃圾回收，把存活的对象（包括Eden和S0）copy到S1区，存活对象年龄+1  
        3. 清空Eden和S0区  
        4. 交换S0和S1区  
        5. 如果有对象年龄超过15，移入老年区
3. 系统参数查看
   ```java
   Runtime.getRuntime().maxMemory();//JVM堆内存试图使用的最大内存，即-Xmx参数值
   Runtime.getRuntime().totalMemory();//JVM堆内存当前使用的内存大小，即-Xms参数值
   ```
4. GC算法  
    1. 引用计数法  
    2. 复制算法  
        运用到新生代;可以避免内存碎片的产生,但是需要占用更多内存空间  
    3. 标记清除  
        用在老年代;分为标记,清除两步.先标记,统一清除.节约空间,但是会产生碎片,扫描两次耗时严重.
    4. 标记清除压缩  
        用在老年代;标记清除之后,对碎片进行整理,会消耗性能
5. JVM常用调优参数  
    1. -Xms:默认堆内存大小
    2. -Xmx:最大堆内存大小(常设置和默认相同)
    3. -XX:对象从新生代转入老年代的阈值
6. JMM  
    1. 三个性质：可见性，原子性，有序性
    2. volatile：保证可见行，不保证原子性，禁止指令重排